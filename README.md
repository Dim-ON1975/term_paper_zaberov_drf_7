# Курсовая работа № 7
## «Атомные привычки»
### Заберов Дмитрий, Python IND 27.0

## Технологии
Проект разработан на ЯП Python 3.11

## Использование
Реализован трекер полезных привычек с отправкой уведомлений в чат телеграм-бота.
## Разработка
### Требования
Для запуска проекта (разработка велась на базе ОС Windows 11) необходимо:
- установить сервиcа Redis на ПК (Windows 11): https://community.chocolatey.org/packages/redis-64/3.0.501
- установить необходимые зависимости (см. файл pyproject.toml)
- запустить сервер django (в отдельной консоли): python manage.py runserver
- запустить сервер redis (в отдельной консоли): redis-server
- запустить celery worker (в отдельной консоли): celery -A core worker -P eventlet -l info
- запустить celery (в отдельной консоли): celery -A core.celery beat -l info
- проверка на PEP8: flake8 . --exclude=.venv,env,migrations,htmlcov --ignore=E501

Кроме того, следует учитывать, что настройки вынесены в файл .env, который не выкладывается в репозиторий, однако имеется файл .env.simple, позволяющий разработчику (пользователю приложения) определить перечень необходимых ключей и настроек для работы приложений.
## Особенности
### Проект содержит несколько приложений:
1.  account – приложение для регистрации и авторизации пользователей проекта.
2.  auth-api - приложение для генерирования токенов аутентификации (access, refresh).
3.  habits – приложение для формирования полезных привычек: создания, просмотра, редактирования и удаления (CRUD).

### Соответствие ТЗ:
1.  Настроен CORS (/core/settings.py).
2.  Настроена интеграция с Телеграмом (/core/settings.py; /habits/services.py; /habits/tasks.py): периодичность отправки сообщений в телеграм строится по следующей логике: в соответствии с периодичностью, определённой пользователем, определяется день недели и если он совпадает с текущим днём недели и указанным временем, то сообщение о привычке отправляется в чат (/habits/tasks.py).
3.  Реализована пагинация (/habits/paginators.py; /habits/views.py).
4.  Использованы переменные окружения (.env.simple; /core/settings.py).
5.  Все необходимые модели описаны или переопределены (/users/models.py; /habits/models.py).
6.  Все необходимые эндпоинты реализованы (/core/urls.py; /users/views.py; /users/urls.py; /habits/views.py; /habits/urls.py): по условию задания нужно было реализовать два эндпоинта по выводу списка привычек, созданных пользователем и списка опубликованных привычек. Я счёл излишним писать два эндпоинта и реализовал вывод общего списка привычек, в котором выводятся привычки, созданные пользователем и опубликованные. Из этого списка можно легко выделить и то, и другое.
7.  Настроены все необходимые валидаторы (/habits/validators.py): валидаторы полезных, приятных привычек и вознаграждений, объединены в один.
8.  Описанные права доступа заложены (/user/permissions.py; /habits/permissions.py)
9.  Настроены отложенные задачи через Celery (/core/__init__.py; /core/celery.py; /core/settings.py; /habits/tasks.py; /users/tasks.py).
10. Проект покрыт тестами, как минимум, на 80% (/htmlcov/ - 81%)
11. Код оформлен в соответствии с лучшими практиками.
12. Имеется список зависимостей (pyproject.toml).
13. Результат проверки Flake8 равен 100%, при исключении миграций: flake8 . --exclude=.venv,env,migrations,htmlcov --ignore=E501.


### Дополнительно
Исключительно в целях демонстрации работы в репозиторий выложена директория /fixtures/. После проверки работы и успешной сдачи она будет удалена из GitHub. 

Команда создания фикстуры:
python -Xutf8 manage.py dumpdata <app> --indent=4 -o fixtures/<app>_data.json

Команда загрузки фикстуры в БД:
python manage.py loaddata fixtures/<app>_data.json

### Установка зависимостей
Зависимости, необходимые для работы и тестирования проекта указаны в pyproject.toml.